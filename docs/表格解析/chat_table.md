---
sort: 4
---


# chat_table

* [算法开发手册](https://kg-nlp.github.io/Algorithm-Project-Manual/表格解析/chat_table.html)

* [个人知乎](https://www.zhihu.com/people/zhangyj-n)

## 赛题类型
```
初级：数据基本查询（40分）

参赛者需要利用提供的ChatGLM2-6B开源模型和上市公司年报原始数据，并以此为基础创建信息问答系统。系统需能够解决基本查询，如：某公司2021年的研发费用是多少？等问题。

中级：数据统计分析查询（30分）

在初级阶段的基础上，参赛者需要进行金融数据的统计分析和关联指标查询。系统需基于各类指标，提供问题和答案，如：某公司2021年研发费用增长率为多少？等问题。

高级：开放性问题（30分）

如：某公司2021年主要研发项目是否涉及国家创新领域，如新能源技术、人工智能等？

```


## prompt设计

* [Prompt设计](https://kg-nlp.github.io/Algorithm-Project-Manual/大模型/Prompt设计.html)

* [基于ChatGLM2-6B 和 LangChain 的 Agents 实现：Prompt Template、Tools 和 Agents（下）](https://zhuanlan.zhihu.com/p/642703708)

* 常用问答设计
```bash
请根据上下文来回答问题，
如果上下文的信息无法回答问题，请回答"我不知道"。

上下文：
"""
{根据用户输入的问题，从向量数据库查询的结果。一行一个}
"""

问题："""{用户输入的问题}"""

回答：
```

```bash
请根据下面带```分隔符的文本来回答问题。
如果该文本中没有相关内容可以回答问题，请直接回复：“抱歉，该问题需要更多上下文信息。”
```{text}```
问题：{query}
```


## 工程化

* 采取常规检索+LLM汇总方法
    * 常规检索问答是否加入模型意图识别,模型实体识别(现阶段不作)
* 整个流程分为以下几个模块:
    * 数据入库处理模块
        * 非结构化文本拼接,拆分
        * 关键词库
    * 关键词检索模块
        * 搭建ES库,构造非结构化文本索引和结构化表格索引
        * 替换分词库,如有同义词库则增加
    * 排序模块
        * 使用bge或m3e计算语义相似度召回
        * 上述效果不好使用比赛数据训练自监督语义模型,重新进行向量召回
        * 上述方法作为粗排召回,可以增加开源交互模型作为精排测试效果(不单独训练精排模型)
        * 向量召回使用milvus引擎
    * LLM模块
        * 使用上述关键词检索和排序召回的结果,TOPN的设置以tokens为限制,原则上ChatGLM2-6b可以最长32k,但采取召回数据越多,文本越长,经LLM推理,总结后结果越差,目前暂定使用TOP5数据,文本长度<1024
        * 提示词工程,针对ChatGLM需要不断试错
    
* 预计周日搭建完系统