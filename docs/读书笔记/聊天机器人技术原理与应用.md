---
sort: 1
---

# 聊天机器人技术原理与应用

* [🔨算法开发手册](https://kg-nlp.github.io/Algorithm-Project-Manual/读书笔记/聊天机器人技术原理与应用.html)
* [🔨个人知乎](https://www.zhihu.com/people/zhangyj-n)

[TOC]

## 聊天机器人的分类与应用场景

![Python聊天机器人开发：基于自然语言处理与机器学习-图书 - 博文视点](https://ts1.cn.mm.bing.net/th/id/R-C.256290de4fe9824b712e95e9844c2f0a?rik=NkJZ8fCp8jDadA&riu=http%3a%2f%2fdownload.broadview.com.cn%2fLargeCover%2f20041dca84e7f58f6ab9&ehk=4OFg4B8vt458JZ2u%2b9Y7LkuSyFXpOWinzdpo54T7eUo%3d&risl=&pid=ImgRaw&r=0)

### 从应用场景区分

- 在线客服
  - 查一下商品具体的信息，还有一些活动等
  - 有个拒识，可以转向人工，同时还有很多需要过滤的信息

* 娱乐
  * 可以同用户进行不限主题的对话（闲聊），当然也可以有特定主题的服务，比如说询问天气和一些生活常识

- 教育
  - 有人机交互功能的学习培训类产品（偏向硬件）
- 个人助理
  - 实现用户个人事务的查询和代办
- 智能问答
  - 用户可以以自然语言的形式提问，起到辅助用户决策的目的；通常是其他场景下的一个服务模块

### 从实现方式区分

- 检索式

  * 目前生产环境一般都是检索式

  - 构建知识库，构建问答库，检索匹配方式给出用户答案

* 生成式
  * 可以覆盖任意的话题，但回答质量不好控制

### 从功能角度区分

- 问答系统
- 面向任务的对话系统
- 闲聊系统
- 主动推荐系统（暂不考虑）

## NLU,DM，NLG

- 自然语言理解，会话管理，自然语言生成
- 目前市面上的一些经典产品，兜底操作

## IBM Watson

- 集成了自然语言处理、信息检索、知识表示、自动推理、机器学习等多项技术的应用，形成了假设认知和大规模的证据收集、分析、评价和深度问答技术。

## 自然语言理解

- 主要模块
  - 实体识别、用户意图识别、用户情感识别、指代消解、省略恢复、回复确认、拒识判断等

  - 显示意图、隐式意图

- 规则：直接定义模块
- 统计：做分类
- 最能体现句子所包含的信息的4种词性为 名词、动词、形容词和副词
- 多轮对话另一种思路：层级神经网络
- 安全回答：聊天机器人的大多数答案严重趋同，不具有实际价值，无法让人机对话继续进行；从全局角度考虑，安全回答问题，就是神经网络回复生成陷入了局部最优解，需要给模型施加一个干扰，对抗网络。

## 自然语言生成

- 流线型的自然语言生成系统包括你文本规划、句子规划、句法实现 3个模块
- 基于模板的自然语言生成
  - 自然语言生成模板由句子（ sentence ）模板和词汇（ word ）模板组成。句子模板包括若干个含有变量的句子
  - 适用于任务驱动的对话系统

## 对话管理

- 包括**对话状态和动作选择**
- 对话状态不好理解？
- 管理模块涉及的关键技术
  - 对话行为识别，对话状态识别，对话策略学习，对话奖励
    - 对话行为识别：预先定义好用户的意图
    - 对话状态识别：对话状态和对话上下文和行为有关，是由上一时刻的状态和该时刻的行为共同决定的？
    - 对话策略学习：对语料进行学习，学习行为和状态
    - 对话奖励：评价机制，强化学习

## 智能问答系统

- 信息检索、数据库查询、问答系统
- KBQA
  - KBQA 系统中的**问句理解模块**提取问题中的实体后，**答案信息抽取模块**通过在知识库中查询该实体得到以该实体节点为中心的知识库子图， 并**依据某些规则或模板**从提取到的子图中抽取相应的**节点或边**，得到表征问题和**候选答案**特征的特征向量，最后将候选答案的特征向量作为分**类模型**的输入， 通过模型输出的分值对候选答案**进行筛选**，从而得出最终答案。
  - 问句分析模块：更集中于**实体识别**
  - 短语映射模块：问题分析模块提取的**信息词**与知识库或知识图谱中的资源对应的**标签映射**连接起来。从字符串相似度和语义相似度进行映射
  - 消岐模块：候选排序模块，确保识别的信息词和知识库或图谱中的实体一一映射，没有歧义；可以利用属性、参数、相似度作为规则限制筛选排序
  - 查询构建模块：以元组的形式 补充空槽位
  - **先看具体实例，再看主流的方法**
  - 实例
    - **自然语言理解、查询映射、答案生成**
      - 问句处理：query解析，主要采用基于模板的匹配，识别关键词
      - 意图识别，根据问句信息和意图识别转化对应的查询
      - 调用图谱、数据库等知识库
      - 进行实体对齐，排序等操作
    - 问句处理：主要确定句子中与现有任务相关的关键词
    - 意图识别：确定某个任务下具体什么问题，可以基于关键信息词确定意图，或是整句语义分类（类似于事件抽取）
    - 映射问题表示：问句实体和图谱或知识库 实体 要一一对应，可以使用字符串相似度比较或是语义相似度，或是建立词表
    - 构建查询：三元组查询的语言（比如cypher,sparql)
    - 知识推理
    - 当在知识库中查到的答案不止一个，则进行排序

## 任务型对话系统

- 实例：
  - **自然语言理解、对话管理和自然语言生成**
  - 语言理解：领域识别、意图识别、槽位填充
  - 对话管理：上下文信息，用户个性化信息——对应具体的动作
  - 语言生成：根据动作生成回复语言
  - 多轮请求对话，必要的槽位填充，补充缺失策略
- 理论：
  - 开放域的对话系统
    - FAQ的检索方式
    - 端到端
  - 面向任务的对话系统
    - 有明确的目的和任务，衡量的指标也明确
    - 面向任务的对话系统需要维护一个用户目标状态的表示，并且依赖一个决策过程来完成指定的任务
  - 模块化的对话系统：NLU 、DST ( Dialogue State Tracki 吨，对话状态追踪）、DPL ( Dialogue Policy Leaming ，对话策略学习）、NLG
    - NLU：得到用户意图和槽位信息 的**结构化表述**；必须预先定义好语义框架
    - DST：追踪用户需求，判断**当前对话状态**；输入为多轮对话的历史和当前的用户动作，理解输入含义；**状态有好多种**
    - DPL：根据当前状态，输出下一步的执行动作，与意图类似，也由意图和槽位构成：**状态的下一个状态**
    - NLG：将系统动作转为自然语言输出（模板）
  - 端到端的对话系统：（由数据驱动，但目前数据规模不大，仍以模块化为主）
- 对话系统平台
  - NLU
    - 针对任务需求进行意图和槽位的定义，导入训练的样本数据，每条样本开发者必须进行意图和槽位的标注
  - DST-DPL
    - 有限状态自动机，澄清话术（缺少哪个状态，则主动请求交互）

## 闲聊系统

- 实例：
  - 基于检索和基于生成
  - **对话库检索**的闲聊
    - 对话库建立
    - 搜索引擎对语料进行粗粒度筛选
    - 使用匹配算法进行精排
    - 根据结果问句获取对应的回复答案
- 理论：

## 主动推荐系统（参照搜索和推荐专题）

[推荐系统/工程框架](https://kg-nlp.github.io/Algorithm-Project-Manual/推荐系统/工程框架.html)



